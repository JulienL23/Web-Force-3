<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>AJAX GET</title>
    </head>
    <body>

        <div id="demo"></div>

        <button type="button" id="action">Change Content</button>

        <script>
            document.getElementById("action").addEventListener("click", loadDoc);
            // on cible l'élément bouton du document et à chaque fois que l'on clic sur le bouton, la fonction loadDoc s'executera.

            function loadDoc(){
                var xhttp = new XMLHttpRequest();

                xhttp.open("GET", "ajax_info.txt", true);
                // on souhaite récupérer les données du fichier ajax_info.txt, on prépare le fichier texte
                // open est une méthode de l'objet xhttp, les arguments sont : GET(mode d'ouverture) , fichier de données, true(mode asynchrone)

                xhttp.send();
                // on donne l'ordre d'envoyer les données du fichier ajax_info à notre fichier ajaxJsGet.html

                xhttp.onreadystatechange = function(){
                    if(xhttp.readyState == 4 && xhttp.status == 200){
                        document.getElementById("demo").innerHTML = xhttp.responseText;
                    }
                }
                // la condition if permet de contrôler que la requete est terminée et que les données sont complètement accesible

                /*
                0 ( unitialize) non initialisé
                1 (loading) début du transfert des données
                2 (loaded) données transférées
                3 (interactive) les données reçues sont accessibles en partie
                4 (complete) les données sont complétement accessibles
                */

            }
        </script>
    </body>
</html>
